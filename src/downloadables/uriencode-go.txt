package main

import (
	"fmt"
	"net/url"
	"strconv"
	"strings"
)

func main() {
	fileName := "my file(2).txt"
	header := fmt.Sprintf("Content-Disposition: attachment; filename*=UTF-8''%s", encodeRFC5987ValueChars(fileName))
	fmt.Println(header)
	// "Content-Disposition: attachment; filename*=UTF-8''my%20file%282%29.txt"
}

func encodeRFC5987ValueChars(str string) string {
	encodedStr := url.QueryEscape(str)
	encodedStr = strings.ReplaceAll(encodedStr, "%27", "'")
	encodedStr = strings.ReplaceAll(encodedStr, "%28", "(")
	encodedStr = strings.ReplaceAll(encodedStr, "%29", ")")
	encodedStr = strings.ReplaceAll(encodedStr, "%2A", "*")
	encodedStr = strings.ReplaceAll(encodedStr, "%7C", "|")
	encodedStr = strings.ReplaceAll(encodedStr, "%60", "`")
	encodedStr = strings.ReplaceAll(encodedStr, "%5E", "^")
	return encodedStr
}